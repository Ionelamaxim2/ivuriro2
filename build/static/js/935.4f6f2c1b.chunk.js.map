{"version":3,"file":"static/js/935.4f6f2c1b.chunk.js","mappings":"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","sources":["components/Dither.jsx"],"sourcesContent":["import { useRef, useEffect, forwardRef } from \"react\";\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\";\nimport { EffectComposer, wrapEffect } from \"@react-three/postprocessing\";\nimport { Effect } from \"postprocessing\";\nimport * as THREE from \"three\";\n\nconst waveVertexShader = `\nprecision highp float;\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n  vec4 viewPosition = viewMatrix * modelPosition;\n  gl_Position = projectionMatrix * viewPosition;\n}\n`;\n\nconst waveFragmentShader = `\nprecision highp float;\nuniform vec2 resolution;\nuniform float time;\nuniform float waveSpeed;\nuniform float waveFrequency;\nuniform float waveAmplitude;\nuniform vec3 waveColor;\nuniform vec2 mousePos;\nuniform int enableMouseInteraction;\nuniform float mouseRadius;\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0/289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec2 fade(vec2 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }\n\nfloat cnoise(vec2 P) {\n  vec4 Pi = floor(P.xyxy) + vec4(0.0,0.0,1.0,1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0,0.0,1.0,1.0);\n  Pi = mod289(Pi);\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n  vec4 i = permute(permute(ix) + iy);\n  vec4 gx = fract(i * (1.0/41.0)) * 2.0 - 1.0;\n  vec4 gy = abs(gx) - 0.5;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n  vec2 g00 = vec2(gx.x, gy.x);\n  vec2 g10 = vec2(gx.y, gy.y);\n  vec2 g01 = vec2(gx.z, gy.z);\n  vec2 g11 = vec2(gx.w, gy.w);\n  vec4 norm = taylorInvSqrt(vec4(dot(g00,g00), dot(g01,g01), dot(g10,g10), dot(g11,g11)));\n  g00 *= norm.x; g01 *= norm.y; g10 *= norm.z; g11 *= norm.w;\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  return 2.3 * mix(n_x.x, n_x.y, fade_xy.y);\n}\n\nconst int OCTAVES = 4;\nfloat fbm(vec2 p) {\n  float value = 0.0;\n  float amp = 1.0;\n  float freq = waveFrequency;\n  for (int i = 0; i < OCTAVES; i++) {\n    value += amp * abs(cnoise(p));\n    p *= freq;\n    amp *= waveAmplitude;\n  }\n  return value;\n}\n\nfloat pattern(vec2 p) {\n  vec2 p2 = p - time * waveSpeed;\n  return fbm(p + fbm(p2)); \n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  uv -= 0.5;\n  uv.x *= resolution.x / resolution.y;\n  float f = pattern(uv);\n  if (enableMouseInteraction == 1) {\n    vec2 mouseNDC = (mousePos / resolution - 0.5) * vec2(1.0, -1.0);\n    mouseNDC.x *= resolution.x / resolution.y;\n    float dist = length(uv - mouseNDC);\n    float effect = 1.0 - smoothstep(0.0, mouseRadius, dist);\n    f -= 0.5 * effect;\n  }\n  vec3 col = mix(vec3(0.0), waveColor, f);\n  gl_FragColor = vec4(col, 1.0);\n}\n`;\n\nconst ditherFragmentShader = `\nprecision highp float;\nuniform float colorNum;\nuniform float pixelSize;\nconst float bayerMatrix8x8[64] = float[64](\n  0.0/64.0, 48.0/64.0, 12.0/64.0, 60.0/64.0,  3.0/64.0, 51.0/64.0, 15.0/64.0, 63.0/64.0,\n  32.0/64.0,16.0/64.0, 44.0/64.0, 28.0/64.0, 35.0/64.0,19.0/64.0, 47.0/64.0, 31.0/64.0,\n  8.0/64.0, 56.0/64.0,  4.0/64.0, 52.0/64.0, 11.0/64.0,59.0/64.0,  7.0/64.0, 55.0/64.0,\n  40.0/64.0,24.0/64.0, 36.0/64.0, 20.0/64.0, 43.0/64.0,27.0/64.0, 39.0/64.0, 23.0/64.0,\n  2.0/64.0, 50.0/64.0, 14.0/64.0, 62.0/64.0,  1.0/64.0,49.0/64.0, 13.0/64.0, 61.0/64.0,\n  34.0/64.0,18.0/64.0, 46.0/64.0, 30.0/64.0, 33.0/64.0,17.0/64.0, 45.0/64.0, 29.0/64.0,\n  10.0/64.0,58.0/64.0,  6.0/64.0, 54.0/64.0,  9.0/64.0,57.0/64.0,  5.0/64.0, 53.0/64.0,\n  42.0/64.0,26.0/64.0, 38.0/64.0, 22.0/64.0, 41.0/64.0,25.0/64.0, 37.0/64.0, 21.0/64.0\n);\n\nvec3 dither(vec2 uv, vec3 color) {\n  vec2 scaledCoord = floor(uv * resolution / pixelSize);\n  int x = int(mod(scaledCoord.x, 8.0));\n  int y = int(mod(scaledCoord.y, 8.0));\n  float threshold = bayerMatrix8x8[y * 8 + x] - 0.25;\n  float step = 1.0 / (colorNum - 1.0);\n  color += threshold * step;\n  float bias = 0.2;\n  color = clamp(color - bias, 0.0, 1.0);\n  return floor(color * (colorNum - 1.0) + 0.5) / (colorNum - 1.0);\n}\n\nvoid mainImage(in vec4 inputColor, in vec2 uv, out vec4 outputColor) {\n  vec2 normalizedPixelSize = pixelSize / resolution;\n  vec2 uvPixel = normalizedPixelSize * floor(uv / normalizedPixelSize);\n  vec4 color = texture2D(inputBuffer, uvPixel);\n  color.rgb = dither(uv, color.rgb);\n  outputColor = color;\n}\n`;\n\nclass RetroEffectImpl extends Effect {\n  constructor() {\n    const uniforms = new Map([\n      [\"colorNum\", new THREE.Uniform(4.0)],\n      [\"pixelSize\", new THREE.Uniform(2.0)],\n    ]);\n    super(\"RetroEffect\", ditherFragmentShader, { uniforms });\n    this.uniforms = uniforms;\n  }\n  set colorNum(v) {\n    this.uniforms.get(\"colorNum\").value = v;\n  }\n  get colorNum() {\n    return this.uniforms.get(\"colorNum\").value;\n  }\n  set pixelSize(v) {\n    this.uniforms.get(\"pixelSize\").value = v;\n  }\n  get pixelSize() {\n    return this.uniforms.get(\"pixelSize\").value;\n  }\n}\n\nconst WrappedRetro = wrapEffect(RetroEffectImpl);\n\nconst RetroEffect = forwardRef((props, ref) => {\n  const { colorNum, pixelSize } = props;\n  return <WrappedRetro ref={ref} colorNum={colorNum} pixelSize={pixelSize} />;\n});\nRetroEffect.displayName = \"RetroEffect\";\n\nfunction DitheredWaves({\n  waveSpeed,\n  waveFrequency,\n  waveAmplitude,\n  waveColor,\n  colorNum,\n  pixelSize,\n  disableAnimation,\n  enableMouseInteraction,\n  mouseRadius,\n}) {\n  const mesh = useRef(null);\n  const mouseRef = useRef(new THREE.Vector2());\n  const { viewport, size, gl } = useThree();\n\n  const waveUniformsRef = useRef({\n    time: new THREE.Uniform(0),\n    resolution: new THREE.Uniform(new THREE.Vector2(0, 0)),\n    waveSpeed: new THREE.Uniform(waveSpeed),\n    waveFrequency: new THREE.Uniform(waveFrequency),\n    waveAmplitude: new THREE.Uniform(waveAmplitude),\n    waveColor: new THREE.Uniform(new THREE.Color(...waveColor)),\n    mousePos: new THREE.Uniform(new THREE.Vector2(0, 0)),\n    enableMouseInteraction: new THREE.Uniform(enableMouseInteraction ? 1 : 0),\n    mouseRadius: new THREE.Uniform(mouseRadius),\n  });\n\n  useEffect(() => {\n    const dpr = gl.getPixelRatio();\n    const w = Math.floor(size.width * dpr),\n      h = Math.floor(size.height * dpr);\n    const res = waveUniformsRef.current.resolution.value;\n    if (res.x !== w || res.y !== h) {\n      res.set(w, h);\n    }\n  }, [size, gl]);\n\n  const prevColor = useRef([...waveColor]);\n  useFrame(({ clock }) => {\n    const u = waveUniformsRef.current;\n\n    if (!disableAnimation) {\n      u.time.value = clock.getElapsedTime();\n    }\n\n    if (u.waveSpeed.value !== waveSpeed) u.waveSpeed.value = waveSpeed;\n    if (u.waveFrequency.value !== waveFrequency)\n      u.waveFrequency.value = waveFrequency;\n    if (u.waveAmplitude.value !== waveAmplitude)\n      u.waveAmplitude.value = waveAmplitude;\n\n    if (!prevColor.current.every((v, i) => v === waveColor[i])) {\n      u.waveColor.value.set(...waveColor);\n      prevColor.current = [...waveColor];\n    }\n\n    u.enableMouseInteraction.value = enableMouseInteraction ? 1 : 0;\n    u.mouseRadius.value = mouseRadius;\n\n    if (enableMouseInteraction) {\n      u.mousePos.value.copy(mouseRef.current);\n    }\n  });\n\n  const handlePointerMove = (e) => {\n    if (!enableMouseInteraction) return;\n    const rect = gl.domElement.getBoundingClientRect();\n    const dpr = gl.getPixelRatio();\n    mouseRef.current.set(\n      (e.clientX - rect.left) * dpr,\n      (e.clientY - rect.top) * dpr\n    );\n  };\n\n  return (\n    <>\n      <mesh ref={mesh} scale={[viewport.width, viewport.height, 1]}>\n        <planeGeometry args={[1, 1]} />\n        <shaderMaterial\n          vertexShader={waveVertexShader}\n          fragmentShader={waveFragmentShader}\n          uniforms={waveUniformsRef.current}\n        />\n      </mesh>\n\n      <EffectComposer>\n        <RetroEffect colorNum={colorNum} pixelSize={pixelSize} />\n      </EffectComposer>\n\n      <mesh\n        onPointerMove={handlePointerMove}\n        position={[0, 0, 0.01]}\n        scale={[viewport.width, viewport.height, 1]}\n        visible={false}\n      >\n        <planeGeometry args={[1, 1]} />\n        <meshBasicMaterial transparent opacity={0} />\n      </mesh>\n    </>\n  );\n}\n\nexport default function Dither({\n  waveSpeed = 0.05,\n  waveFrequency = 3,\n  waveAmplitude = 0.3,\n  waveColor = [0.5, 0.5, 0.5],\n  colorNum = 4,\n  pixelSize = 2,\n  disableAnimation = false,\n  enableMouseInteraction = true,\n  mouseRadius = 1,\n}) {\n  return (\n    <Canvas\n      className=\"w-full h-full relative\"\n      camera={{ position: [0, 0, 6] }}\n      dpr={window.devicePixelRatio}\n      gl={{ antialias: true, preserveDrawingBuffer: true }}\n    >\n      <DitheredWaves\n        waveSpeed={waveSpeed}\n        waveFrequency={waveFrequency}\n        waveAmplitude={waveAmplitude}\n        waveColor={waveColor}\n        colorNum={colorNum}\n        pixelSize={pixelSize}\n        disableAnimation={disableAnimation}\n        enableMouseInteraction={enableMouseInteraction}\n        mouseRadius={mouseRadius}\n      />\n    </Canvas>\n  );\n}\n"],"names":["waveVertexShader","waveFragmentShader","RetroEffectImpl","Effect","constructor","uniforms","Map","THREE","super","this","colorNum","v","get","value","pixelSize","WrappedRetro","wrapEffect","RetroEffect","forwardRef","props","ref","_jsx","DitheredWaves","_ref","waveSpeed","waveFrequency","waveAmplitude","waveColor","disableAnimation","enableMouseInteraction","mouseRadius","mesh","useRef","mouseRef","viewport","size","gl","useThree","waveUniformsRef","time","resolution","mousePos","useEffect","dpr","getPixelRatio","w","Math","floor","width","h","height","res","current","x","y","set","prevColor","useFrame","_ref2","clock","u","getElapsedTime","every","i","copy","_jsxs","_Fragment","children","scale","args","vertexShader","fragmentShader","EffectComposer","onPointerMove","e","rect","domElement","getBoundingClientRect","clientX","left","clientY","top","position","visible","transparent","opacity","Dither","_ref3","Canvas","className","camera","window","devicePixelRatio","antialias","preserveDrawingBuffer","displayName"],"sourceRoot":""}